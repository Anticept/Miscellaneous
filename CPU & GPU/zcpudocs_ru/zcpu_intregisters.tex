\newcommand{\regentry}[3]{\texttt{#1} & \texttt{#2} & #3 \\ \hline}

\chapter{Внутренние регистры}
У процессора есть несколько внутренних регистров, которые используются для хранения состояния процессора, и управления его работой. Записывать и читать из этих регистров можно с помощью инструкций \reg{CPUSET} и \reg{CPUGET}.

Например:

\begin{verbatim}
CPUGET EAX,24 //Прочитать регистр 24 в EAX (указатель на таблицу прерываний)
CPUSET 9,EBX //Выставить регистр 9 (размер стека) в значение EBX

CPUGET EAX,1000 //Несуществующий регистр запишет 0 в EAX
\end{verbatim}

Регистры \reg{XEIP}, \reg{CPAGE}, \reg{PPAGE}, \reg{SerialNo}, \reg{CODEBYTES}, \reg{TimerDT} только для чтения - их значение невозможно изменить.

Изменение регистров \reg{IP} или \reg{CS} будет эквивалентно безусловному переходу.

\singlespacing
\begin{longtable}{|c|c|p{3.4in}|} \hline
Mnemonic & Number & Description \\ \hline
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\regentry{IP}           {00}{Указатель на инструкцию}
\regentry{EAX}          {01}{Регистр общего назначения A}
\regentry{EBX}          {02}{Регистр общего назначения B}
\regentry{ECX}          {03}{Регистр общего назначения C}
\regentry{EDX}          {04}{Регистр общего назначения D}
\regentry{ESI}          {05}{Исходный индекс}
\regentry{EDI}          {06}{Целевой индекс}
\regentry{ESP}          {07}{Указатель стека}
\regentry{EBP}          {08}{Базовый указатель}
\regentry{ESZ}          {09}{Размер стека}

\regentry{CS}           {16}{Сегмент кода}
\regentry{SS}           {17}{Сегмент стека}
\regentry{DS}           {18}{Сегмент данных}
\regentry{ES}           {19}{Дополнительный сегмент}
\regentry{GS}           {20}{Дополнительный сегмент}
\regentry{FS}           {21}{Дополнительный сегмент}
\regentry{KS}           {22}{Дополнительный сегмент}
\regentry{LS}           {23}{Дополнительный сегмент}

\regentry{IDTR}         {24}{Указатель на таблицу прерываний}
\regentry{CMPR}         {25}{Результат операции сравнения}
\regentry{XEIP}         {26}{Указатель на начало текущей инструкции}
\regentry{LADD}         {27}{Код текущего прерывания}
\regentry{LINT}         {28}{Номер текущего прерывания}
\regentry{TMR}          {29}{Счётчик циклов}
\regentry{TIMER}        {30}{Внутренний таймер}
\regentry{CPAGE}        {31}{Текущий номер страницы}
\regentry{IF}           {32}{Флаг состояния системы прерываний}
\regentry{PF}           {33}{Флаг режима совместимости}
\regentry{EF}           {34}{Флаг расширеного режима}
\regentry{NIF}          {35}{Значение флага прерываний на следущем шаге}
\regentry{MF}           {36}{Флаг расширеного режима работы с памятью}
\regentry{PTBL}         {37}{Адрес таблицы страницы}
\regentry{PTBE}         {38}{Количество записей в таблице страниц}
\regentry{PCAP}         {39}{Возможность работы с системой страниц}
\regentry{RQCAP}        {40}{Возможность задержаных обращений к памяти}

\regentry{PPAGE}        {41}{Номер предыдущей страницы}
\regentry{MEMRQ}        {42}{Тип запроса памяти}

\regentry{RAMSize}      {43}{Количество внутренней памяти}
\regentry{External}     {44}{Внешняя операция ввода-вывода}
\regentry{BusLock}      {45}{Состояние шины}
\regentry{Idle}         {46}{Сигнал о пропуске циклов до следущего сигнала синхронизации}
\regentry{INTR}         {47}{Обработка прерывания}

\regentry{SerialNo}     {48}{Серийный номер процессора}
\regentry{CODEBYTES}    {49}{Количество запущеного кода}
\regentry{BPREC}        {50}{Режим точности операций с двоичными числами}
\regentry{IPREC}        {51}{Режим точности операций с целыми числами}
\regentry{NIDT}         {52}{Количество записей в таблице прерываний}
\regentry{BlockStart}   {53}{Начало блока}
\regentry{BlockSize}    {54}{Размер блока}
\regentry{VMODE}        {55}{Режим векторных операций (2: 2D, 3: 3D)}
\regentry{XTRL}         {56}{Уровень доступа для внешнего доступа}
\regentry{HaltPort}     {57}{Номер порта, до получения значения на котором процессор остановлен}
\regentry{HWDEBUG}      {58}{Режим аппаратной отладки}
\regentry{DBGSTATE}     {59}{Состояние аппаратного режима отладки}
\regentry{DBGADDR}      {60}{Адрес/параметр аппаратной отладки}
\regentry{CRL}          {61}{Текущий уровень доступа}
\regentry{TimerDT}      {62}{Шаг таймера}
\regentry{MEMADDR}      {63}{Адрес, запрашиваемый операцией связаной с памятью}

\regentry{TimerMode}    {64}{Режим таймера}
\regentry{TimerRate}    {65}{Частота срабатывания таймера}
\regentry{TimerPrevTime}{66}{Время предыдущего срабатывания}
\regentry{TimerAddress} {67}{Номер внешнего прерывания для вызова при срабатывании таймера}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{longtable}	
\onehalfspacing